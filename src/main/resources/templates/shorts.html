<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube Shorts Player</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #f4f4f4;
        }

        .slider-container {
            position: relative;
            width: 70%;
            max-width: 600px;
        }

        .short {
            width: 100%;
            height: 480px; /* 비디오 플레이어 높이 */
            background: #000;
        }

        iframe {
            width: 100%;
            height: 100%;
        }

        .button-container {
            position: absolute;
            top: 50%;
            width: 100%;
            display: flex;
            justify-content: space-between;
            transform: translateY(-50%);
        }

        .prev-button, .next-button {
            background-color: rgba(0, 0, 0, 0.5);
            color: white;
            border: none;
            font-size: 24px;
            padding: 10px;
            cursor: pointer;
        }

        .prev-button:disabled, .next-button:disabled {
            background-color: rgba(0, 0, 0, 0.2);
            cursor: not-allowed;
        }
    </style>
</head>
<body>
<h1>영화 관련 YouTube Shorts</h1>
<div class="slider-container">
    <div id="videoPlayer" class="short">
        <!-- 첫 번째 영상은 JavaScript에서 동적으로 설정 -->
        <iframe id="videoIframe" src="" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
    </div>

    <div class="button-container">
        <!-- 이전 영상 버튼 -->
        <button class="prev-button" id="prevButton" onclick="changeVideo(-1)">&#10094;</button>
        <!-- 다음 영상 버튼 -->
        <button class="next-button" id="nextButton" onclick="changeVideo(1)">&#10095;</button>
    </div>
</div>

<!-- Thymeleaf에서 shorts 리스트를 JSON 형식으로 전달 -->
<script th:inline="javascript">
    /*<![CDATA[*/
    var shorts = /*[[${shorts}]]*/ [];  // Thymeleaf로 전달받은 shorts를 JavaScript 배열로 변환
    /*]]>*/
</script>

<script>
    let currentIndex = 0;
    const videoIframe = document.getElementById("videoIframe");
    const prevButton = document.getElementById("prevButton");
    const nextButton = document.getElementById("nextButton");

    // 초기화 - 첫 번째 영상을 iframe에 설정
    if (shorts.length > 0) {
        videoIframe.src = `${shorts[0]}`;
    }

    // 비디오 변경 함수
    function changeVideo(direction) {
        // currentIndex를 direction에 맞게 증가/감소
        currentIndex += direction;

        // 리스트 끝에서 다음 또는 이전으로 넘길 수 없도록 설정
        if (currentIndex < 0) {
            currentIndex = shorts.length - 1; // 마지막 영상으로 이동
        } else if (currentIndex >= shorts.length) {
            currentIndex = 0; // 첫 번째 영상으로 이동
        }

        // 현재 영상의 src 업데이트
        if (shorts[currentIndex]) {
            videoIframe.src = `${shorts[currentIndex]}`;
        }

        // 버튼 활성화/비활성화 설정
        prevButton.disabled = currentIndex === 0;
        nextButton.disabled = currentIndex === shorts.length - 1;
    }

    // 처음에 버튼 상태 설정
    prevButton.disabled = shorts.length === 0 || currentIndex === 0;
    nextButton.disabled = shorts.length === 0 || currentIndex === shorts.length - 1;
</script>

</body>
</html>
